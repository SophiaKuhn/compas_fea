


<!DOCTYPE html>
<html lang="en">
    <head>
        <title>compas -- additonal packages</title>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    
        <meta name="author" content="Tom Van Mele" />
        <meta name="description" content="compas is a computational framework for research in architecture and structures." />

        <link rel="shortcut icon" href="/_static/images/compas.ico" type="image/x-icon">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous" />
        <link rel="stylesheet" type="text/css" href="/_static/css/github.css" />
        <link rel="stylesheet" type="text/css" href="/_static/css/compas.css" />
        <link rel="stylesheet" type="text/css" href="/_static/css/compas-reference.css" />

        
            <link rel="next" title="CAD" href="13_cad.html" />
        
        
        
            <link rel="prev" title="Steps" href="11_steps.html" />
        

        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    </head>
    <body data-spy="scroll" data-target="#compas-localnav">

        <header class="navbar navbar-expand compas-navbar">
            <a class="navbar-brand" href="/">
                <img src="/_static/images/compas_icon.png" width="36px" height="36px" alt="compas" />
            </a>

                <ul class="navbar-nav">
                    <li class="nav-item ">
                        <a class="nav-link " href="/main/">Main library</a>
                    </li>
                    <li class="nav-item ">
                        <a class="nav-link " href="/packages/">Additional Packages</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://forum.compas-framework.org">Forum</a>
                    </li>
                </ul>
        </header>
        
        <div class="container-fluid compas-container">
            <div class="row flex-xl-nowrap">

                <main class="col-12 col-md-9 col-xl-8 compas-content" role="main">

                    

                        <!-- 
    <nav class="breadcrumb">
        <a class="breadcrumb-item" href="https://compas-dev.github.io/">compas</a>
        <a class="breadcrumb-item" href="https://compas-dev.github.io/packages">additional packages</a>
        
            
                <a class="breadcrumb-item" href="../tutorial.html" accesskey="U">tutorial</a>
            
        
    </nav>
 -->

                        

                        <div class="section" id="analysis">
<h1>Analysis</h1>
<p>This page describes how to analyse a complete <strong>Structure</strong> object and interpret the resulting data. There are three processes in analysing a <strong>Structure</strong> object using a specific finite element software package or library:</p>
<ul class="simple">
<li><p>Write the required input file for the FE software to read. This is done through the method <code class="docutils literal notranslate"><span class="pre">.write_input_file()</span></code>.</p></li>
<li><p>Send the input file to the FE solver for analysis through method <code class="docutils literal notranslate"><span class="pre">.analyse()</span></code>.</p></li>
<li><p>Extract the data from the analysis results and store in them back into <strong>structure.results</strong>. The relevant data are extracted with method <code class="docutils literal notranslate"><span class="pre">.extract_data()</span></code>.</p></li>
</ul>
<p>These three parts are performed in sequence using the method <code class="docutils literal notranslate"><span class="pre">.analyse_and_extract()</span></code>, which takes the <code class="docutils literal notranslate"><span class="pre">software</span></code> string (<code class="docutils literal notranslate"><span class="pre">'abaqus'</span></code>, <code class="docutils literal notranslate"><span class="pre">'ansys'</span></code>, <code class="docutils literal notranslate"><span class="pre">'opensees'</span></code> or <code class="docutils literal notranslate"><span class="pre">sofistik</span></code>), a list of the data <code class="docutils literal notranslate"><span class="pre">fields</span></code> to extract, the number of processor cores to use <code class="docutils literal notranslate"><span class="pre">cpus</span></code>, and if needed some information on the <code class="docutils literal notranslate"><span class="pre">license</span></code> type. A call to this method looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">analyse_and_extract</span><span class="p">(</span><span class="n">software</span><span class="o">=</span><span class="s1">&#39;abaqus&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">])</span>
</code></pre></div>
</div>
<div class="section" id="abaqus">
<h2>Abaqus</h2>
<p>The input file for generating an Abaqus structural model is the <code class="docutils literal notranslate"><span class="pre">.inp</span></code> input file. With this file, it is possible to generate and analyse a structural model, as well as request certain output data to be written to an output database <code class="docutils literal notranslate"><span class="pre">.odb</span></code> file. Because the official reference documentation for Abaqus <code class="docutils literal notranslate"><span class="pre">.inp</span></code> files is vast, it will not be described here what every line of the <code class="docutils literal notranslate"><span class="pre">.inp</span></code> file means. There are a few important points to highlight about the Python procedure and data format of the <strong>Structure</strong> object, and the generated input file format: 1) Abaqus uses a numbering system that starts from 1, therefore for the input file every node and element from the <strong>Structure</strong> object has 1 added to it, which is then subtracted for all results data so that it remains consistent with the input numbering. 2) When an element is created, it also makes an individual set for just that element named <strong>element_x</strong>. Because of the different numbering systems of Python and Abaqus, an element set <strong>element_4</strong> will refer to Abaqus element 5.</p>
<p>When an input file is written, a confirmation message will appear in the terminal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="o">*****</span> <span class="n">Abaqus</span> <span class="nb">input</span> <span class="nb">file</span> <span class="n">generated</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Temp</span><span class="o">/</span><span class="n">truss_tower</span><span class="o">.</span><span class="n">inp</span> <span class="o">*****</span>
</code></pre></div>
</div>
<p>The input file will be sent for analysis via Abaqus in a Python subprocess that launches the Abaqus executable <code class="docutils literal notranslate"><span class="pre">abaqus</span> <span class="pre">cae</span></code> with no graphical user interface (<code class="docutils literal notranslate"><span class="pre">noGUI</span></code> mode) and running the <strong>launch_job.py</strong> script. The goal is to pair the Abaqus executable with the <code class="docutils literal notranslate"><span class="pre">.inp</span></code> file and to generate an <code class="docutils literal notranslate"><span class="pre">.odb</span></code> file of data, and is equivalent to manually performing the following in a terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span>abaqus cae <span class="nv">noGUI</span><span class="o">=</span>~/compas_fea/fea/abaq/launch_job.py -- arguments
</code></pre></div>
</div>
<p>During analysis, an information stream will print a rolling update of the subprocess progress, and show <code class="docutils literal notranslate"><span class="pre">COMPLETED</span></code> if the analysis was successful. If there was not a successful analysis, a variety of error messages will appear to try and help the user evaluate what may have gone wrong. If it was not possible to find what was wrong with the model from the terminal messages, the model should be inspected manually within Abaqus by loading the input file and submitting a job with the job monitor open. Student versions of Abaqus must have <code class="docutils literal notranslate"><span class="pre">cpus=1</span></code> (also by default), as multi-core processing is not enabled for these versions.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span>Abaqus JOB simple-truss
 Abaqus <span class="m">6</span>.14-1
 Begin Analysis Input File Processor
 <span class="m">13</span>/09/2017 <span class="m">17</span>:56:25
 Run pre.exe
 <span class="m">13</span>/09/2017 <span class="m">17</span>:56:28
 End Analysis Input File Processor
 Begin Abaqus/Standard Analysis
 <span class="m">13</span>/09/2017 <span class="m">17</span>:56:28
 Run standard.exe
 <span class="m">13</span>/09/2017 <span class="m">17</span>:56:30
 End Abaqus/Standard Analysis
 Abaqus JOB truss-tower COMPLETED

Abaqus License Manager checked out the following licenses:
Abaqus/Standard checked out <span class="m">6</span> tokens from Flexnet server XXX-XXX-XXX.
&lt;<span class="m">212</span> out of <span class="m">580</span> licenses remain available&gt;.
</code></pre></div>
</div>
<p>If the analysis was successful, a confirmation message will appear in the terminal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="o">*****</span> <span class="n">Analysis</span> <span class="n">successful</span> <span class="o">*****</span>

<span class="o">*****</span> <span class="n">Abaqus</span> <span class="n">analysis</span> <span class="n">time</span> <span class="p">:</span> <span class="mf">17.1095</span> <span class="n">s</span> <span class="o">*****</span>
</code></pre></div>
</div>
<p><strong>Note</strong>: If the analysis was unsuccessful, the terminal will look similar to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="n">Abaqus</span><span class="o">/</span><span class="n">Analysis</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">errors</span>
<span class="n">Abaqus</span> <span class="n">Error</span><span class="p">:</span> <span class="n">cae</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">an</span> <span class="n">error</span><span class="o">.</span>

<span class="o">*****</span> <span class="n">Analysis</span> <span class="n">failed</span> <span class="o">-</span> <span class="n">attempting</span> <span class="n">to</span> <span class="n">read</span> <span class="n">error</span> <span class="n">logs</span> <span class="o">*****</span>
</code></pre></div>
</div>
<p>If this is the case, the script will attempt to read a variety of error logs that are made during the analysis. If some, but not all data, was written to the <code class="docutils literal notranslate"><span class="pre">.odb</span></code> file, the data extraction will still continue by reading the last frame of the output database. But it must be remembered that if the analysis did not fully complete, this last frame is <strong>NOT</strong> the final frame of the analysis, and should be respected as an equilibrium state taking actions less than those applied. Often this frame will be at the stage that the given number of increments managed to progress, and so increasing this number of increments number may help reach the final state.</p>
<p>The data are extracted from the output database <code class="docutils literal notranslate"><span class="pre">.odb</span></code> file with <code class="docutils literal notranslate"><span class="pre">abaq.extract_odb_data()</span></code>, which is called automatically as part of the <code class="docutils literal notranslate"><span class="pre">.extract_data()</span></code> method. In the same folder as the <code class="docutils literal notranslate"><span class="pre">.odb</span></code> file, it will generate a <code class="docutils literal notranslate"><span class="pre">results.json</span></code> file of scraped unprocessed data. This file will be in the folder <strong>/path/name/</strong> and will store the data back into the <strong>Structure</strong> object with the following confirmation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span>***** Saving data to structure.results successful *****

***** Data extracted from Abaqus .odb file : <span class="m">2</span>.3439 s *****
</code></pre></div>
</div>
<p>If there was a problem with saving the data the following error message will appear:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span>***** Saving data to structure.results unsuccessful *****
</code></pre></div>
</div>
</div>
<div class="section" id="opensees">
<h2>OpenSees</h2>
<p>The input file for generating an OpenSees structural model is the <code class="docutils literal notranslate"><span class="pre">.tcl</span></code> input file. A <code class="docutils literal notranslate"><span class="pre">basic</span></code> model type will be made in 3D <code class="docutils literal notranslate"><span class="pre">-ndm</span> <span class="pre">3</span></code> with all degrees-of-freedom at each node <code class="docutils literal notranslate"><span class="pre">-ndf</span> <span class="pre">6</span></code>, unless the model is exclusively made of truss elements where <code class="docutils literal notranslate"><span class="pre">-ndf</span> <span class="pre">3</span></code> will be used. Nodes and elements will be numbered starting from 1, and then 1 subtracted for the storage of data after the analysis, so that it is consistent with the input <strong>Structure</strong> object. An important difference (currently) with OpenSees is that the structural model should have only two steps: the first step representing all of the boundary conditions containing only <strong>Displacement</strong> objects, and the second step representing all applied <strong>Load</strong> objects.</p>
<p>Beam elements must be given an <code class="docutils literal notranslate"><span class="pre">ex</span></code> local axis orientation for <code class="docutils literal notranslate"><span class="pre">geomTransf</span></code>, as OpenSees will not make an assumption for the cross-section orientation. This should be defined either directly when adding the elements with <code class="docutils literal notranslate"><span class="pre">axes</span></code>, or added to the element name (<code class="docutils literal notranslate"><span class="pre">{'ex':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">0]}</span></code> for example) so it can be picked-up in a CAD environment. This orientation need not be defined for <strong>TrussElement</strong> types.</p>
<p>When written, a confirmation message will appear in the terminal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="o">*****</span> <span class="n">OpenSees</span> <span class="nb">input</span> <span class="nb">file</span> <span class="n">generated</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Temp</span><span class="o">/</span><span class="n">beam_frame</span><span class="o">.</span><span class="n">tcl</span> <span class="o">*****</span>
</code></pre></div>
</div>
<p>The input file will be sent for analysis via OpenSees in a Python subprocess that launches the executable, given by the <code class="docutils literal notranslate"><span class="pre">exe</span></code> string, or by assuming by default <code class="docutils literal notranslate"><span class="pre">C:/OpenSees.exe</span></code> for Windows. No graphical user interface is launched, feedback will only be presented in the terminal while the <code class="docutils literal notranslate"><span class="pre">.tcl</span></code> file is running:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span>          OpenSees -- Open System For Earthquake Engineering Simulation
               Pacific Earthquake Engineering Research Center
                      Version 2.5.0 (rev 6536) 64-Bit

     (c) Copyright 1999-2016 The Regents of the University of California
                             All Rights Reserved
(Copyright and Disclaimer @ http://www.berkeley.edu/OpenSees/copyright.html)
</code></pre></div>
</div>
<p>Followed by a completion message after the analysis:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="o">*****</span> <span class="n">OpenSees</span> <span class="n">analysis</span> <span class="n">time</span> <span class="p">:</span> <span class="mf">0.9063</span> <span class="n">s</span> <span class="o">*****</span>
</code></pre></div>
</div>
<p>Only simple constant static loads are currently implemented with basic analysis settings: <code class="docutils literal notranslate"><span class="pre">constraints</span> <span class="pre">Plain</span></code>, <code class="docutils literal notranslate"><span class="pre">numberer</span> <span class="pre">RCM</span></code>, <code class="docutils literal notranslate"><span class="pre">system</span> <span class="pre">ProfileSPD</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span> <span class="pre">NormUnbalance</span></code> based on the <code class="docutils literal notranslate"><span class="pre">step.tolerance</span></code> and <code class="docutils literal notranslate"><span class="pre">step.iterations</span></code>, <code class="docutils literal notranslate"><span class="pre">algorithm</span> <span class="pre">NewtonLineSearch</span></code>, <code class="docutils literal notranslate"><span class="pre">integrator</span> <span class="pre">LoadControl</span></code>, <code class="docutils literal notranslate"><span class="pre">analysis</span> <span class="pre">Static</span></code> and <code class="docutils literal notranslate"><span class="pre">analyze</span></code> using the number of increments in <code class="docutils literal notranslate"><span class="pre">step.increments</span></code>.</p>
<p>As OpenSees support is still in development, only limited output is currently implemented (<code class="docutils literal notranslate"><span class="pre">'u'</span></code>: displacements and <code class="docutils literal notranslate"><span class="pre">'ur'</span></code>: rotations, <code class="docutils literal notranslate"><span class="pre">rf</span></code>: reaction forces and <code class="docutils literal notranslate"><span class="pre">rm</span></code>: reaction moments). Data will be stored for all nodes and elements as <code class="docutils literal notranslate"><span class="pre">.out</span></code> text files such as <code class="docutils literal notranslate"><span class="pre">step_name_node_u.out</span></code>. These files are organised with OpenSees defaults, which list analysis increments vertically and data horizontally. <strong>Note</strong>: plotting functions currently use only the final increment, i.e. the last line of the file.</p>
</div>
<div class="section" id="sofistik">
<h2>Sofistik</h2>
<p>The input file for generating a Sofistik structural model is the <code class="docutils literal notranslate"><span class="pre">.dat</span></code> input file. Sofistik differs from Abaqus and OpenSees in that lines of code must be supplied in the appropriate sub-program, such as <strong>PROG AQUA</strong>, <strong>PROG SOFIMSHA</strong> or <strong>PROG SOFILOAD</strong>. The input file code will be automatically wrapped with these sub-programs calls, but as a consequence of the way they need to be ordered, will produce an input file which differs significantly when compared to the layout of the <code class="docutils literal notranslate"><span class="pre">.tcl</span></code> and <code class="docutils literal notranslate"><span class="pre">.inp</span></code> files. Similar to Abaqus and OpenSees, nodes and elements will be added starting from number 1, but will be internally re-ordered by Sofistik for optimising the analysis via <code class="docutils literal notranslate"><span class="pre">CTRL</span> <span class="pre">OPT</span> <span class="pre">OPTI</span> <span class="pre">10</span></code> For every <strong>ElementProperties</strong> object, a Sofistik group will be made in multiples of 10000, such that element 2943 in group 2 will have element number 22943 as it will be associated with <code class="docutils literal notranslate"><span class="pre">GRP</span> <span class="pre">2</span> <span class="pre">BASE</span> <span class="pre">20000</span></code>.</p>
<p>When written, a confirmation message will appear in the terminal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="o">*****</span> <span class="n">Sofistik</span> <span class="nb">input</span> <span class="nb">file</span> <span class="n">generated</span><span class="p">:</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Temp</span><span class="o">/</span><span class="n">beam_frame</span><span class="o">.</span><span class="n">dat</span> <span class="o">*****</span>
</code></pre></div>
</div>
<p>The input <code class="docutils literal notranslate"><span class="pre">.dat</span></code> file will currently not be automatically sent for analysis, it must be manually run from the Sofistik GUI through <strong>Execute</strong> and then visualised in <strong>WinGRAF</strong>.</p>
</div>
<div class="section" id="ansys">
<h2>Ansys</h2>
<ul class="simple">
<li></li>
</ul>
<div class="section" id="fields-components-and-data">
<h3>Fields, components and data</h3>
<p>After the analysis, the data are stored in the <strong>Structure</strong> object, where they are accessed by the user to read or visualise the results. The organisation of the collected data in <code class="docutils literal notranslate"><span class="pre">structure.results</span></code> is in nested dictionaries with keys following a pattern of the: <code class="docutils literal notranslate"><span class="pre">step</span></code> string, data type string (<code class="docutils literal notranslate"><span class="pre">'nodal'</span></code> or <code class="docutils literal notranslate"><span class="pre">'element'</span></code>), the <code class="docutils literal notranslate"><span class="pre">field</span></code> string, and the node or element number (<code class="docutils literal notranslate"><span class="pre">structure.results[step][type][field][number]</span></code>). A helper method is also provided through <code class="docutils literal notranslate"><span class="pre">structure.get_nodal_results()</span></code> and <code class="docutils literal notranslate"><span class="pre">structure.get_element_results()</span></code>, where the <code class="docutils literal notranslate"><span class="pre">step</span></code>, <code class="docutils literal notranslate"><span class="pre">field</span></code> and <code class="docutils literal notranslate"><span class="pre">node</span></code> or <code class="docutils literal notranslate"><span class="pre">elements</span></code> are given, and the requested results returned:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">get_nodal_results</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="s1">&#39;step_load&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;rfm&#39;</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="s1">&#39;nset_pins&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><code class="language-python border rounded"><span></span><span class="n">mdl</span><span class="o">.</span><span class="n">get_element_results</span><span class="p">(</span><span class="n">step</span><span class="o">=</span><span class="s1">&#39;step_load&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s1">&#39;sxx&#39;</span><span class="p">,</span> <span class="n">elements</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
</code></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">field</span></code> strings are based on the notation below:</p>
</div>
</div>
<div class="section" id="node-fields">
<h2>Node fields</h2>
<div class="line-block">
<div class="line">Field | x | y | z | Magnitude |</div>
<div class="line">— | — | — | — | — |</div>
<div class="line">Reaction forces      <code class="docutils literal notranslate"><span class="pre">'rf'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rfx'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rfy'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rfz'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rfm'</span></code> |</div>
<div class="line">Reaction moments     <code class="docutils literal notranslate"><span class="pre">'rm'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rmx'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rmy'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rmz'</span></code> | <code class="docutils literal notranslate"><span class="pre">'rmm'</span></code> |</div>
<div class="line">Displacements        <code class="docutils literal notranslate"><span class="pre">'u'</span></code>  | <code class="docutils literal notranslate"><span class="pre">'ux'</span></code>  | <code class="docutils literal notranslate"><span class="pre">'uy'</span></code>  | <code class="docutils literal notranslate"><span class="pre">'uz'</span></code>  | <code class="docutils literal notranslate"><span class="pre">'um'</span></code>  |</div>
<div class="line">Rotations            <code class="docutils literal notranslate"><span class="pre">'ur'</span></code> | <code class="docutils literal notranslate"><span class="pre">'urx'</span></code> | <code class="docutils literal notranslate"><span class="pre">'ury'</span></code> | <code class="docutils literal notranslate"><span class="pre">'urz'</span></code> | <code class="docutils literal notranslate"><span class="pre">'urm'</span></code> |</div>
<div class="line">Concentrated forces  <code class="docutils literal notranslate"><span class="pre">'cf'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cfx'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cfy'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cfz'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cfm'</span></code> |</div>
<div class="line">Concentrated moments <code class="docutils literal notranslate"><span class="pre">'cm'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cmx'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cmy'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cmz'</span></code> | <code class="docutils literal notranslate"><span class="pre">'cmm'</span></code> |</div>
</div>
</div>
<div class="section" id="element-fields">
<h2>Element fields</h2>
<div class="line-block">
<div class="line">— | — | — | — | — |</div>
<div class="line">Spring forces <code class="docutils literal notranslate"><span class="pre">'spf'</span></code>                     | <code class="docutils literal notranslate"><span class="pre">'spfx'</span></code>                | <code class="docutils literal notranslate"><span class="pre">'spfy'</span></code>             | <code class="docutils literal notranslate"><span class="pre">'spfz'</span></code>           |</div>
<div class="line">Section forces <code class="docutils literal notranslate"><span class="pre">'sf'</span></code> (beams)             | Axial <code class="docutils literal notranslate"><span class="pre">'sfnx'</span></code>          | Shear <cite>x</cite> <code class="docutils literal notranslate"><span class="pre">'sfvx'</span></code>   | Shear <cite>y</cite> <code class="docutils literal notranslate"><span class="pre">'sfvy'</span></code> |</div>
<div class="line">Section forces per width <code class="docutils literal notranslate"><span class="pre">'sf'</span></code> (shells)  | Axial <cite>x</cite> <code class="docutils literal notranslate"><span class="pre">'sfnx'</span></code>      | Shear <cite>x</cite> <code class="docutils literal notranslate"><span class="pre">'sfvx'</span></code>   | Shear <cite>y</cite> <code class="docutils literal notranslate"><span class="pre">'sfvy'</span></code> | Transverse shear <cite>x</cite> <code class="docutils literal notranslate"><span class="pre">'sfwx'</span></code> | Transverse shear <cite>y</cite> <code class="docutils literal notranslate"><span class="pre">'sfwy'</span></code> |</div>
<div class="line">Section moments <code class="docutils literal notranslate"><span class="pre">'sm'</span></code> (beams)            | Moment <cite>x-x</cite> <code class="docutils literal notranslate"><span class="pre">'smx'</span></code>    | Moment <cite>y-y</cite> <code class="docutils literal notranslate"><span class="pre">'smy'</span></code> | Torsion <code class="docutils literal notranslate"><span class="pre">'smz'</span></code>    |</div>
<div class="line">Section moments per width <code class="docutils literal notranslate"><span class="pre">'sm'</span></code> (shells) | Moment <cite>y-y</cite> <code class="docutils literal notranslate"><span class="pre">'smx'</span></code>    | Moment <cite>x-x</cite> <code class="docutils literal notranslate"><span class="pre">'smy'</span></code> | Torsion <code class="docutils literal notranslate"><span class="pre">'smz'</span></code> |</div>
<div class="line">Section strains <code class="docutils literal notranslate"><span class="pre">'se'</span></code> (beams)            | Axial <code class="docutils literal notranslate"><span class="pre">'senx'</span></code>          | Shear <cite>y</cite> <code class="docutils literal notranslate"><span class="pre">'sevy'</span></code>   | Shear <cite>x</cite> <code class="docutils literal notranslate"><span class="pre">'sevx'</span></code> |</div>
</div>
<div class="line-block">
<div class="line">Section curvatures <code class="docutils literal notranslate"><span class="pre">'sk'</span></code> (beams)         | Curvature <cite>x-x</cite> <code class="docutils literal notranslate"><span class="pre">'skx'</span></code> | Curvature <cite>y-y</cite> <code class="docutils literal notranslate"><span class="pre">'sky'</span></code> | Twist <code class="docutils literal notranslate"><span class="pre">'skz'</span></code> |</div>
<div class="line">Section curvatures <code class="docutils literal notranslate"><span class="pre">'sk'</span></code> (shells)        | Curvature <cite>y-y</cite> <code class="docutils literal notranslate"><span class="pre">'skx'</span></code> | Curvature <cite>x-x</cite> <code class="docutils literal notranslate"><span class="pre">'sky'</span></code> | Twist <code class="docutils literal notranslate"><span class="pre">'skz'</span></code> |</div>
<div class="line">Stress <code class="docutils literal notranslate"><span class="pre">'s'</span></code> (beams)                      | Axial <code class="docutils literal notranslate"><span class="pre">'sxx'</span></code>           | Hoop <code class="docutils literal notranslate"><span class="pre">'syy'</span></code>            | Shear (torsion) <code class="docutils literal notranslate"><span class="pre">'sxy'</span></code> |</div>
<div class="line">Stress <code class="docutils literal notranslate"><span class="pre">'s'</span></code> (shells)                     | Axial <code class="docutils literal notranslate"><span class="pre">'sxx'</span></code>           | Axial <code class="docutils literal notranslate"><span class="pre">'syy'</span></code>           | Shear <code class="docutils literal notranslate"><span class="pre">'sxy'</span></code> |</div>
<div class="line">Stress (derived) <code class="docutils literal notranslate"><span class="pre">'s'</span></code> (shells and beams) | Von Mises <code class="docutils literal notranslate"><span class="pre">'smises'</span></code>    | Max principal <code class="docutils literal notranslate"><span class="pre">'smaxp'</span></code> | Min principal <code class="docutils literal notranslate"><span class="pre">'sminp'</span></code> |</div>
<div class="line">Strain <code class="docutils literal notranslate"><span class="pre">'e'</span></code> (beams)                      | Axial <code class="docutils literal notranslate"><span class="pre">'exx'</span></code>           | Hoop <code class="docutils literal notranslate"><span class="pre">'eyy'</span></code>            | Shear (torsion) <code class="docutils literal notranslate"><span class="pre">'exy'</span></code> |</div>
<div class="line">Strain <code class="docutils literal notranslate"><span class="pre">'e'</span></code> (shells)                     | Axial <code class="docutils literal notranslate"><span class="pre">'exx'</span></code>           | Axial <code class="docutils literal notranslate"><span class="pre">'eyy'</span></code>           | Shear <code class="docutils literal notranslate"><span class="pre">'exy'</span></code> |</div>
<div class="line">Strain (derived) <code class="docutils literal notranslate"><span class="pre">'e'</span></code> (shells and beams) | Max principal <code class="docutils literal notranslate"><span class="pre">'emaxp'</span></code> | Min principal <code class="docutils literal notranslate"><span class="pre">'eminp'</span></code> |</div>
</div>
<p>Reinforcement forces <code class="docutils literal notranslate"><span class="pre">'rbfor'</span></code></p>
</div>
<div class="section" id="integration-and-section-points">
<h2>Integration and section points</h2>
<p>For <code class="docutils literal notranslate"><span class="pre">'nodal'</span></code> data, accessing the displacement in <cite>z</cite> for step <code class="docutils literal notranslate"><span class="pre">'step_load'</span></code> and for node 4 would be <code class="docutils literal notranslate"><span class="pre">structure.results['step_load']['nodal']['uz'][4]</span></code>, which would give a single float value. For <code class="docutils literal notranslate"><span class="pre">'element'</span></code> data, there is often no single data value that can represent the entire element, as some elements require many data values to be evaluated across its volume. During a finite element analysis, specific points are evaluated across an element and  section related to the element shape function and cross-section shape (Gauss points). Each of these data-points is stored for the element as an integration point–section point string key. This key looks  like <code class="docutils literal notranslate"><span class="pre">'ip4_sp1'</span></code>, which would be the data for integration point 4 and section point 1 (see the Elements and Sections topics for the locations of these points).</p>
<p>The data request <code class="docutils literal notranslate"><span class="pre">structure.results['step_load']['element']['smises'][4]</span></code> for an example shell element, will return a dictionary of data with keys as the integration point–section point keys. For a four noded shell element these would be four integration points (the four internal points, unless a reduced integration scheme is used leading to one point) and two section points (top and bottom layers by default). When data stored in this format are converted to nodal data (which happens during the plotting data process), the following points must be observed:</p>
<ul class="simple">
<li><p>For some situations, taking a mean value of all points could give meaningless or misleading results. For example, the mean value of normal stresses in a beam under pure bending would be zero, as positive and negative normal stresses would cancel each other out.</p></li>
<li><p>Selecting one representative integration point is generally not possible without some understanding of the structural model and loading. For instance, points on a beam cross-section will have completely different stress values depending on the combination of major axis and minor axis bending.</p></li>
<li><p>Picking a maximum value of Von Mises stress could be used to find a critical heavily stressed point, as these stresses are always positive. But picking a maximum or minimum value for a stress where the sign matters, as with  compression or tension, is not so straightforward.</p></li>
</ul>
</div>
</div>

                        
                        <!-- <nav class="compas-sideways">
                            
                                <a href="11_steps.html" class="btn btn-primary compas-prev" role="button">Steps</a>
                            

                            
                                <a href="13_cad.html" class="btn btn-primary compas-next" role="button">CAD</a>
                            
                        </nav> -->

                    

                </main>

                <div class="col-12 col-md-3 col-xl-2 compas-sidebar" role="navigation"> 
                    <div class="navbar-light">

                        <form id="" class="d-flex compas-searchbox" action="../search.html" method="get">
                            <input class="form-control" type="text" name="q" placeholder="Search docs" />
                            <input type="hidden" name="check_keywords" value="yes" />
                            <input type="hidden" name="area" value="default" />

                            <button class="navbar-toggler d-md-none compas-navigation-toggler" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                        </form>

                        
                        

                            <div class="navbar-expand-md">
                                <div id="compas-navigation" class="collapse navbar-collapse compas-navigation">

                                <ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="../intro.html">Introduction</a></li>
<li class="nav-item active"><a class="nav-link reference internal" href="../tutorial.html">Tutorial</a><ul class="nav active">
<li class="nav-item"><a class="nav-link reference internal" href="01_setup.html">Setup</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="02_structure.html">Structure</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="03_nodes.html">Nodes</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="04_elements.html">Elements</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="05_sets.html">Sets</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="06_sections.html">Sections</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="07_material.html">Materials</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="08_properties.html">Properties</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="09_loads.html">Loads</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="10_displacements.html">Displacements</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="11_steps.html">Steps</a></li>
<li class="nav-item active"><a class="nav-link active current reference internal" href="#">Analysis</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="13_cad.html">CAD</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="../examples.html">Examples</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../reference.html">Reference</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="../license.html">License</a></li>
</ul>


                                </div>
                            </div>

                        

                    </div>
                </div>
                
                <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">

                    

                    <ul class="nav flex-column" id="compas-localnav">
<li class="nav-item"><a class="nav-link reference internal" href="#">Analysis</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#abaqus">Abaqus</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#opensees">OpenSees</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#sofistik">Sofistik</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#ansys">Ansys</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#fields-components-and-data">Fields, components and data</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#node-fields">Node fields</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#element-fields">Element fields</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#integration-and-section-points">Integration and section points</a></li>
</ul>
</li>
</ul>


                </div>
            </div>
        </div>

        <footer class="compas-footer">
            
                
                    &#169; Copyright 2017, Block Research Group - ETH Zurich.
                
            

            
                Last updated on Mar 27, 2018.
            

            
                Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
            
        </footer>

        

            <script type="text/javascript">
var DOCUMENTATION_OPTIONS = {
    URL_ROOT          : '',
    VERSION           : '0.1.0',
    COLLAPSE_INDEX    : false,
    FILE_SUFFIX       : '.html',
    HAS_SOURCE        : false,
    SOURCELINK_SUFFIX : '.txt'
};
            </script>

            <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
            
            <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

            <script src="/_static/underscore.js"></script>
            <script src="/_static/doctools.js"></script>
            <script src="/_static/js/searchtools_.js"></script>

            <script>
hljs.initHighlightingOnLoad();
anchors.add();

var pre = document.getElementsByTagName('pre');

for (var i = 0; i < pre.length; i++) {

    var is_code = pre[i].children[0].className.indexOf('language-python');

    if (is_code === 0) {

        var button = document.createElement('button');

        button.className = 'btn btn-secondary copy-code mt-4';
        button.textContent = 'Copy code';
        button.type = 'button';

        pre[i].appendChild(button);
    }
}

var copy_code = new Clipboard('.copy-code', {
    target: function(trigger) {
        return trigger.previousElementSibling;
    }
});

copy_code.on('success', function(event) {
    event.clearSelection();
    event.trigger.textContent = 'Copied!';
    window.setTimeout(function() {
        event.trigger.textContent = 'Copy code';
    }, 2000);
});

copy_code.on('error', function(event) { 
    event.trigger.textContent = 'Press "Ctrl + C" to copy...';
    window.setTimeout(function() {
        event.trigger.textContent = 'Copy code';
    }, 2000);
});
            </script>

        
    </body>
</html>