

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Structure &mdash; compas_fea  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/compas.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="compas_fea  documentation" href="../index.html"/>
        <link rel="next" title="Nodes" href="nodes.html"/>
        <link rel="prev" title="Setup" href="setup.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> compas_fea
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#importing-modules-and-classes">Importing modules and classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-and-folder-names">File and folder names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structure-object">Structure object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-and-saving">Loading and saving</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="elements.html">Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="sets.html">Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="sections.html">Sections</a></li>
<li class="toctree-l1"><a class="reference internal" href="material.html">Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="properties.html">Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="loads.html">Loads</a></li>
<li class="toctree-l1"><a class="reference internal" href="displacements.html">Displacements</a></li>
<li class="toctree-l1"><a class="reference internal" href="steps.html">Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="cad.html">CAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">compas_fea</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <!-- <li>Structure</li> -->
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/pages/structure.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="structure">
<h1><a class="toc-backref" href="#id1">Structure</a><a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h1>
<p>The following shows some of the basics of importing and the main <strong>Structure</strong> object.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#structure" id="id1">Structure</a><ul>
<li><a class="reference internal" href="#importing-modules-and-classes" id="id2">Importing modules and classes</a></li>
<li><a class="reference internal" href="#file-and-folder-names" id="id3">File and folder names</a></li>
<li><a class="reference internal" href="#structure-object" id="id4">Structure object</a></li>
<li><a class="reference internal" href="#summary" id="id5">Summary</a></li>
<li><a class="reference internal" href="#loading-and-saving" id="id6">Loading and saving</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="importing-modules-and-classes">
<h2><a class="toc-backref" href="#id2">Importing modules and classes</a><a class="headerlink" href="#importing-modules-and-classes" title="Permalink to this headline">¶</a></h2>
<p>A <strong>.py</strong> file is created for every compas_fea analysis, which is where a <strong>Structure</strong> object is first instantiated and then populated with the components needed for the particular project. To import these components and use other helper functions from the core compas or compas_fea package, <code class="docutils literal"><span class="pre">import</span></code> statements are needed in the first few lines of the file. For example, if the user wishes to use a CAD environment for extracting geometry or visualising analysis results, either of the following could be written to use Rhinoceros or Blender. These imports will make a variety of functions available from the <strong>compas_fea.cad.blender</strong> and <strong>compas_fea.cad.rhino</strong> modules.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.cad</span> <span class="kn">import</span> <span class="n">rhino</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.cad</span> <span class="kn">import</span> <span class="n">blender</span>
</pre></div>
</div>
<p>Similarly, depending on which finite element analysis software or library is being used, one of the following imports would be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.fea.abaq</span> <span class="kn">import</span> <span class="n">abaq</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.fea.ansys</span> <span class="kn">import</span> <span class="n">ansys</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.fea.opensees</span> <span class="kn">import</span> <span class="n">opensees</span>
</pre></div>
</div>
<p>It is also useful to pull modules from the core compas library, especially geometry and datastructure imports to help build the <strong>Structure</strong> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_rhino.helpers.mesh</span> <span class="kn">import</span> <span class="n">mesh_from_guid</span>
<span class="kn">from</span> <span class="nn">compas.datastructures.mesh.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">compas.geometry</span> <span class="kn">import</span> <span class="n">distance_point_point</span>
</pre></div>
</div>
<p>as well as various functions from the core compas CAD packages, for creating, editing or deleting objects and layers:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_blender.utilities</span> <span class="kn">import</span> <span class="n">clear_layers</span>
<span class="kn">from</span> <span class="nn">compas_blender.helpers</span> <span class="kn">import</span> <span class="n">network_from_bmesh</span>
</pre></div>
</div>
<p>The most important imports will be for retrieving classes from the <strong>compas_fea/structure/</strong> folder, including the main <strong>Structure</strong> class itself:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.structure</span> <span class="kn">import</span> <span class="n">GeneralStep</span>
<span class="kn">from</span> <span class="nn">compas_fea.structure</span> <span class="kn">import</span> <span class="n">PointLoad</span>
<span class="kn">from</span> <span class="nn">compas_fea.structure</span> <span class="kn">import</span> <span class="n">Structure</span>
</pre></div>
</div>
<p>These special classes will be described in more detail throughout the various topics.</p>
</div>
<div class="section" id="file-and-folder-names">
<h2><a class="toc-backref" href="#id3">File and folder names</a><a class="headerlink" href="#file-and-folder-names" title="Permalink to this headline">¶</a></h2>
<p>The most important files that are generated when using the compas_fea package, will be saved to folder <code class="docutils literal"><span class="pre">path</span></code> and with the prefix <code class="docutils literal"><span class="pre">name</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;simple-truss&#39;</span>
<span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;/home/al/Temp/&#39;</span>
</pre></div>
</div>
<p>The above pairing will produce files such as <strong>/home/al/Temp/simple-truss.inp</strong> and <strong>/home/al/Temp/simple-truss.obj</strong>. Additional temporary files, including output <strong>.json</strong> data and analysis output databases such as an Abaqus <strong>.odb</strong> file will be stored in a separate folder within <code class="docutils literal"><span class="pre">path</span></code> with folder name <code class="docutils literal"><span class="pre">name</span></code>, this is to keep things organised as an analysis will often generate hundreds of output files. These output files are explained in more detail in the Analysis topic.</p>
</div>
<div class="section" id="structure-object">
<h2><a class="toc-backref" href="#id4">Structure object</a><a class="headerlink" href="#structure-object" title="Permalink to this headline">¶</a></h2>
<p>The container for all information is the <strong>Structure</strong> object, created from the <strong>Structure</strong> class. All of the attributes and methods of this class can be browsed in the source-code at <strong>compas_fea/structure/structure.py</strong>, with the most important methods demonstrated here-in. The following code creates an empty <strong>Structure</strong> object named <strong>mdl</strong> (used in examples as a shortcut for model). See the various topics on the left-hand-side to understand how to add all the various data and objects to the <strong>Structure</strong> object.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">compas_fea.structure</span> <span class="kn">import</span> <span class="n">Structure</span>

<span class="n">mdl</span> <span class="o">=</span> <span class="n">Structure</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id5">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Once constructed, a top-down summary of the <strong>Structure</strong> object can be printed with method <code class="docutils literal"><span class="pre">.summary()</span></code>. This will print information such as the number of nodes and elements, the name of sets and how many items in their selection, and the name and type of added objects such as <strong>Materials</strong>, <strong>Sections</strong>, <strong>Loads</strong>, <strong>Displacements</strong> and <strong>Steps</strong>. This summary is useful for checking that nodes, elements and objects have been added correctly before any analysis is performed.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mdl</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="go">--------------------------------------------------</span>
<span class="go">Structure summary</span>
<span class="go">--------------------------------------------------</span>
<span class="go">Nodes: 5</span>
<span class="go">Elements: 5</span>
<span class="go">Sets:</span>
<span class="go">    nset_base : 4 node(s)</span>
<span class="go">    nset_top : 1 node(s)</span>
<span class="go">    elset_beams : 4 element(s)</span>
<span class="go">    elset_shell : 1 element(s)</span>
<span class="go">Materials:</span>
<span class="go">    mat_elastic : ElasticIsotropic</span>
<span class="go">Sections:</span>
<span class="go">    sec_circ : CircularSection</span>
<span class="go">    sec_shell : ShellSection</span>
<span class="go">Loads:</span>
<span class="go">    load_point : PointLoad</span>
<span class="go">    load_gravity : GravityLoad</span>
<span class="go">Displacements:</span>
<span class="go">    disp_pinned : PinnedDisplacement</span>
<span class="go">Constraints:</span>
<span class="go">Interactions:</span>
<span class="go">Misc:</span>
<span class="go">Steps:</span>
<span class="go">    step_bc : GeneralStep</span>
<span class="go">    step_loads : GeneralStep</span>
<span class="go">--------------------------------------------------</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-and-saving">
<h2><a class="toc-backref" href="#id6">Loading and saving</a><a class="headerlink" href="#loading-and-saving" title="Permalink to this headline">¶</a></h2>
<p>The method and function to save and load a created <strong>Structure</strong> object are <code class="docutils literal"><span class="pre">.save_to_obj()</span></code> and <code class="docutils literal"><span class="pre">load_from_obj()</span></code> respectively, where a filename string is given for the location of the file. This will save or load data as a pickled <code class="docutils literal"><span class="pre">.obj</span></code> containing all populated dictionaries and objects. A confirmation message will be displayed upon save and load.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mdl</span><span class="o">.</span><span class="n">save_to_obj</span><span class="p">(</span><span class="s1">&#39;/home/al/Temp/simple-truss.obj&#39;</span><span class="p">)</span>
<span class="go">***** Structure saved as: /home/al/Temp/simple-truss.obj *****</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">compas_fea.structure.structure</span> <span class="kn">import</span> <span class="n">load_from_obj</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mdl</span> <span class="o">=</span> <span class="n">load_from_obj</span><span class="p">(</span><span class="s1">&#39;/home/al/Temp/simple-truss.obj&#39;</span><span class="p">)</span>
<span class="go">***** Structure loaded from: /home/al/Temp/simple-truss.obj *****</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nodes.html" class="btn btn-neutral float-right" title="Nodes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup.html" class="btn btn-neutral" title="Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Block Research Group.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>